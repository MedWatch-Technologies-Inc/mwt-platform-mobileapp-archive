import 'dart:typed_data';
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'dart:ui' as ui;
import 'dart:io' as io;
import 'package:image/image.dart' as img;
// import 'package:tflite_flutter/tflite_flutter.dart';

import '../utils/constants.dart';

class Classifier {
  final _modelFile = 'twinmodelnoptt.tflite';
  // final _modelFile = 'text_classification.tflite';


  // TensorFlow Lite Interpreter object
  //  Interpreter? _interpreter;

  Classifier() {
    // Load model when the classifier is initialized.
    _loadModel();
  }

  void _loadModel() async {
   /* // Creating the interpreter using Interpreter.fromAsset
    try {
      var interpreterOptions = InterpreterOptions()..useNnApiForAndroid = true;
      _interpreter = await Interpreter.fromAsset(_modelFile,options:interpreterOptions );
      print('Interpreter loaded successfully');
    } catch (e) {
      print('Tflmodel_exception ==> $e');
    }*/
  }

  /*List<double> classify() {
    // tokenizeInputText returns List<List<double>>
    // of shape [1, 256].
    // List<List<double>> input = tokenizeInputText(rawText);


    // The run method will run inference and
    // store the resulting values in output.
    var sig_to_predict = [[0.46323613, 0.39056968],
    [0.45254905, 0.3911721 ],
    [0.43974277, 0.39716725],
    [0.43178482, 0.40591477],
    [0.42738695, 0.40631908],
    [0.42241503, 0.39629527],
    [0.41851732, 0.39314666],
    [0.421239  , 0.41497511],
    [0.43011728, 0.45326969],
    [0.43704853, 0.47702224],
    [0.43744106, 0.46990596],
    [0.43742828, 0.45203817],
    [0.4447025 , 0.45121142],
    [0.45662519, 0.45797229],
    [0.4648376 , 0.43108313],
    [0.4688055 , 0.35824057],
    [0.47535137, 0.29290392],
    [0.48485017, 0.30167188],
    [0.48777304, 0.37160245],
    [0.476926  , 0.40123562],
    [0.45322352, 0.31641444],
    [0.41633662, 0.18941041],
    [0.36159018, 0.20078524],
    [0.29340836, 0.44752597],
    [0.23110013, 0.79669496],
    [0.19102173, 0.96932603],
    [0.17105597, 0.79920532],
    [0.1631163 , 0.4046309 ],
    [0.17229057, 0.0844646 ],
    [0.20939986, 0.03892279],
    [0.27011765, 0.20251152],
    [0.33724618, 0.35043541],
    [0.40223094, 0.34368431],
    [0.47007262, 0.24464383],
    [0.54298803, 0.202647  ],
    [0.61339103, 0.26946914],
    [0.67534662, 0.35921907],
    [0.7306292 , 0.37433059],
    [0.78038224, 0.3256914 ],
    [0.82136868, 0.30487392],
    [0.85296578, 0.36072629],
    [0.87783568, 0.4425397 ],
    [0.89375519, 0.47337687],
    [0.89497604, 0.44987894],
    [0.88329782, 0.44089093],
    [0.86703535, 0.49430809],
    [0.84746936, 0.57598833],
    [0.81834577, 0.61480724],
    [0.7813253 , 0.58882933],
    [0.74862874, 0.54144493],
    [0.72538128, 0.51499358],
    [0.70228985, 0.4963839 ],
    [0.67299722, 0.44584192],
    [0.64670223, 0.36431804],
    [0.63394483, 0.30399888],
    [0.62935421, 0.30531181],
    [0.61955365, 0.34425155],
    [0.60222931, 0.36125742],
    [0.58681284, 0.33500455],
    [0.57933536, 0.3052635 ],
    [0.5759128 , 0.31646628],
    [0.57086856, 0.35767734],
    [0.56445333, 0.37784949],
    [0.56096451, 0.35457741],
    [0.56226935, 0.32408755],
    [0.56445284, 0.33272665],
    [0.56133291, 0.37502628],
    [0.55235799, 0.40104519],
    [0.5448541 , 0.38305951],
    [0.5445452 , 0.35236912],
    [0.54604382, 0.35684394],
    [0.53909753, 0.39599419],
    [0.5232917 , 0.42107075],
    [0.50867523, 0.40099515],
    [0.50101519, 0.36575874],
    [0.49507586, 0.36743706],
    [0.48557439, 0.40936531],
    [0.47642452, 0.43931991],
    [0.47345017, 0.41925158],
    [0.47420022, 0.38010626],
    [0.47200149, 0.38550409],
    [0.46664561, 0.44754889],
    [0.46412613, 0.50563725],
    [0.46664119, 0.50085742],
    [0.46878277, 0.45168925],
    [0.46513731, 0.42919796],
    [0.45777421, 0.45939313],
    [0.45304183, 0.48175971],
    [0.45175991, 0.42730724],
    [0.44551512, 0.32136721],
    [0.42411   , 0.27036462],
    [0.38468419, 0.33142799],
    [0.33098612, 0.42322797],
    [0.26615041, 0.4068678 ],
    [0.19236175, 0.26244787],
    [0.11839496, 0.15062781],
    [0.06029852, 0.25952561],
    [0.02975047, 0.58530561],
    [0.02576775, 0.8925683 ],
    [0.04192263, 0.92010516],
    [0.076924  , 0.63039826],
    [0.13215043, 0.24631496],
    [0.20260045, 0.04002173],
    [0.27821684, 0.09360003],
    [0.35370218, 0.26446874],
    [0.43060824, 0.36147233],
    [0.50924226, 0.32807665],
    [0.58420414, 0.25443179],
    [0.64966249, 0.24383474],
    [0.70499632, 0.30188907],
    [0.7532556 , 0.35750579],
    [0.79643895, 0.36167445],
    [0.83344897, 0.33776721],
    [0.86106398, 0.33818187],
    [0.8765754 , 0.37732065],
    [0.88072447, 0.42354477],
    [0.87736748, 0.4473414 ],
    [0.86867439, 0.45685599],
    [0.85224827, 0.47986158],
    [0.82590593, 0.52359476],
    [0.79402101, 0.56565581],
    [0.76483812, 0.58193356],
    [0.74108453, 0.57073887],
    [0.71756951, 0.5446321 ],
    [0.69002964, 0.50829604],
    [0.6623744 , 0.45638712],
    [0.64136394, 0.39246534],
    [0.62675835, 0.33814287],
    [0.612157  , 0.31504548],
    [0.59529262, 0.32113742],
    [0.58140885, 0.33296697],
    [0.57394114, 0.33238088],
    [0.56750526, 0.32461216],
    [0.5555529 , 0.3264093 ],
    [0.54133074, 0.34172053],
    [0.53401212, 0.3568456 ],
    [0.53493951, 0.35937783],
    [0.53536427, 0.35401081],
    [0.52920309, 0.35458974],
    [0.52062727, 0.36494693],
    [0.51546022, 0.37512739],
    [0.51158216, 0.37674269],
    [0.50356154, 0.3746353 ],
    [0.49251236, 0.37864707],
    [0.48485846, 0.38844574],
    [0.48294865, 0.39400538],
    [0.48241834, 0.39092343],
    [0.4787955 , 0.3875428 ],
    [0.47273353, 0.39272629],
    [0.46825479, 0.40242515],
    [0.46840343, 0.40633774],
    [0.4728965 , 0.40611213],
    [0.47846799, 0.41669111],
    [0.4817615 , 0.44476571],
    [0.48289368, 0.47397268],
    [0.48527928, 0.48179228],
    [0.49097309, 0.46842433],
    [0.49747507, 0.45550609],
    [0.50051889, 0.45154222],
    [0.49913683, 0.4331758 ],
    [0.49637872, 0.37822933],
    [0.49430698, 0.31248166],
    [0.48790542, 0.29678632],
    [0.46480562, 0.35006865],
    [0.41427559, 0.40241823],
    [0.33857496, 0.3618941 ],
    [0.25297125, 0.24183169],
    [0.17232409, 0.19137925],
    [0.10141685, 0.35410472],
    [0.04226661, 0.68400353],
    [0.00519209, 0.93503617],
    [0.00292522, 0.87525996],
    [0.03434706, 0.52134779],
    [0.08366261, 0.13999991],
    [0.13854212, 0.0       ],
    [0.20145556, 0.12875182],
    [0.27911888, 0.32248915],
    [0.36766131, 0.38071688],
    [0.45466776, 0.29914374],
    [0.53243393, 0.22522965],
    [0.60325384, 0.26083514],
    [0.67263676, 0.35449806],
    [0.74169287, 0.39134048],
    [0.80632145, 0.34498527],
    [0.86096385, 0.3001102 ],
    [0.90236195, 0.33399904],
    [0.93084899, 0.42006606],
    [0.94846567, 0.47220896],
    [0.95589577, 0.4603567 ],
    [0.95192692, 0.44331346],
    [0.93612341, 0.48336923],
    [0.91114599, 0.56205215],
    [0.88167801, 0.60623111],
    [0.85108749, 0.58266043],
    [0.81956047, 0.53267911],
    [0.78607942, 0.50666519],
    [0.75213461, 0.49431933],
    [0.72190366, 0.4473174 ],
    [0.69764747, 0.35969649],
    [0.6767577 , 0.29039665],
    [0.65561331, 0.29205483],
    [0.63472441, 0.34083677],
    [0.61708472, 0.36442103],
    [0.60300339, 0.3340441 ],
    [0.59033041, 0.29876493],
    [0.578556  , 0.31598742],
    [0.56853884, 0.37144477],
    [0.55932415, 0.39683783],
    [0.54959832, 0.36222471],
    [0.54077653, 0.31844789],
    [0.53378199, 0.33054083],
    [0.52502145, 0.38993459],
    [0.51176776, 0.42398039],
    [0.49902451, 0.39218882],
    [0.49302701, 0.3412007 ],
    [0.48978703, 0.34359894],
    [0.47963488, 0.40079823],
    [0.46251948, 0.44009558],
    [0.44835494, 0.41139466],
    [0.44151535, 0.35488179],
    [0.43598525, 0.34791706],
    [0.42785656, 0.40101232],
    [0.4213569 , 0.4431641 ],
    [0.41912161, 0.41862931],
    [0.41745521, 0.36588173],
    [0.41547508, 0.3694807 ],
    [0.41824098, 0.44523782],
    [0.4259672 , 0.51296715],
    [0.43087996, 0.4985177 ],
    [0.43041283, 0.43212894],
    [0.43260901, 0.40832353],
    [0.44156059, 0.45487702],
    [0.44837285, 0.48682822],
    [0.44544594, 0.41757145],
    [0.44009937, 0.2879803 ],
    [0.44323783, 0.23475004],
    [0.45092023, 0.31912645],
    [0.44723801, 0.43006916],
    [0.42113807, 0.4043873 ],
    [0.37224202, 0.23906629],
    [0.30483071, 0.13521546],
    [0.22542678, 0.29262422],
    [0.14464334, 0.66988659],
    [0.07449912, 0.98510539],
    [0.02408004, 0.97461262],
    [0.0       , 0.64301595],
    [0.00659355, 0.24864409],
    [0.04162503, 0.05398788],
    [0.09601868, 0.10610551],
    [0.16179582, 0.25044277],
    [0.23674369, 0.32090787],
    [0.31933568, 0.28812637],
    [0.40499082, 0.23648015],
    [0.49037839, 0.24028688],
    [0.57527362, 0.2909223 ],
    [0.65709931, 0.33275176],
    [0.73047299, 0.33744917],
    [0.79538726, 0.32707004],
    [0.85774164, 0.33666656],
    [0.91717555, 0.37378092],
    [0.96285893, 0.41817676],
    [0.98746844, 0.45004244],
    [0.99711601, 0.46957863],
    [0.99999817, 0.49126742],
    [0.99323186, 0.52525879],
    [0.9705638 , 0.56540425],
    [0.93684567, 0.59238086],
    [0.9036528 , 0.58791668],
    [0.87380725, 0.5490594 ],
    [0.84103309, 0.49067183],
    [0.80374427, 0.43314364],
    [0.76895269, 0.38705247],
    [0.74159996, 0.35099485],
    [0.71876039, 0.32342908],
    [0.69656935, 0.31082302],
    [0.67561463, 0.318838  ],
    [0.65654824, 0.3382308 ],
    [0.63648893, 0.34853472],
    [0.61382085, 0.34030891],
    [0.59252607, 0.32813408],
    [0.57765515, 0.33367009],
    [0.5685292 , 0.35716646],
    [0.55958821, 0.37509529],
    [0.54704545, 0.3700898 ],
    [0.53262879, 0.35507718],
    [0.52119709, 0.35763456],
    [0.51562492, 0.38275153],
    [0.51336698, 0.40391521],
    [0.50802491, 0.39725933],
    [0.49610147, 0.37473564],
    [0.48233647, 0.37015366],
    [0.4751865 , 0.39404814],
    [0.47549144, 0.41786679],
    [0.47350258, 0.41137154],
    [0.46110178, 0.38461222],
    [0.443988  , 0.37620239],
    [0.4356006 , 0.40090572],
    [0.43963936, 0.42764544],
    [0.44573907, 0.42135806],
    [0.44450649, 0.39427155],
    [0.43988171, 0.3940084 ],
    [0.44180564, 0.43899833],
    [0.4519949 , 0.48769227],
    [0.46352565, 0.48892881],
    [0.47150046, 0.45059885],
    [0.47732883, 0.43098352],
    [0.48350559, 0.45645969],
    [0.49024651, 0.47532743],
    [0.49725953, 0.4211983 ],
    [0.5034924 , 0.31327217],
    [0.50440182, 0.25502422],
    [0.49345265, 0.31108473],
    [0.46649871, 0.40881798],
    [0.42169774, 0.40591925],
    [0.35742699, 0.26885182],
    [0.2764222 , 0.1504782 ],
    [0.19169141, 0.24709837],
    [0.12172177, 0.57049545],
    [0.07752603, 0.89156855],
    [0.0580724 , 0.94032393],
    [0.05865075, 0.66499006],
    [0.0785326 , 0.28090691],
    [0.11893934, 0.06234387],
    [0.17820073, 0.09823853],
    [0.25131895, 0.253006  ],
    [0.3314942 , 0.34085021],
    [0.41135404, 0.3072177 ],
    [0.4862389 , 0.23913776],
    [0.55718773, 0.23369207],
    [0.62739702, 0.29282304],
    [0.69531809, 0.34740141],
    [0.75486388, 0.35243869],
    [0.8026049 , 0.33192669],
    [0.84037844, 0.33542469],
    [0.86993082, 0.37579742],
    [0.88944329, 0.42327696],
    [0.89698769, 0.45013123],
    [0.89354972, 0.4630791 ],
    [0.88085631, 0.48781798],
    [0.85975144, 0.53284072],
    [0.83271256, 0.57839917],
    [0.80473472, 0.59868782],
    [0.77909545, 0.58625032],
    [0.75414727, 0.55209024],
    [0.72637653, 0.50828982],
    [0.69553131, 0.45778404],
    [0.66552034, 0.40136868],
    [0.64106912, 0.34857531],
    [0.62384614, 0.31554638],
    [0.61094092, 0.31058261],
    [0.59736461, 0.32408255],
    [0.58114521, 0.33589128],
    [0.56523434, 0.33406473],
    [0.55308327, 0.32550774],
    [0.5437624 , 0.32637011],
    [0.53365035, 0.34212492],
    [0.52162318, 0.36008564],
    [0.50973523, 0.36415375],
    [0.49957365, 0.35502979],
    [0.49089851, 0.35047443],
    [0.48352694, 0.36330117],
    [0.47775393, 0.38390091],
    [0.4729251 , 0.3911829 ],
    [0.46792027, 0.38021839],
    [0.46294077, 0.37065437],
    [0.458914  , 0.38205378],
    [0.4556763 , 0.4063908 ],
    [0.4524604 , 0.41559834],
    [0.44895519, 0.39790936],
    [0.4440771 , 0.3759209 ],
    [0.43608074, 0.37938244],
    [0.42695387, 0.40583054],
    [0.42375042, 0.42265785],
    [0.43028252, 0.41168469],
    [0.43930547, 0.39748306],
    [0.43984314, 0.41720271],
    [0.43262378, 0.46784197],
    [0.43089607, 0.50313339],
    [0.44320831, 0.49024971],
    [0.46213812, 0.45293017],
    [0.4748226 , 0.43882604],
    [0.47899434, 0.45043959],
    [0.48196575, 0.43684009],
    [0.48751021, 0.36800458],
    [0.49175118, 0.29430032],
    [0.49083586, 0.29629482],
    [0.48411689, 0.37251204],
    [0.46770556, 0.41595369],
    [0.43235614, 0.33905582],
    [0.37284354, 0.21071786],
    [0.29580137, 0.21852674],
    [0.214474  , 0.46034747],
    [0.13907484, 0.79194938],
    [0.07633558, 0.92904905],
    [0.03483479, 0.72447179],
    [0.0235863 , 0.32753446],
    [0.04417222, 0.04516061],
    [0.08843384, 0.0483305 ],
    [0.14574986, 0.23392084],
    [0.21078153, 0.37132041],
    [0.28375428, 0.34986519],
    [0.36542413, 0.25636448],
    [0.45285396, 0.23124233],
    [0.53929982, 0.30035542],
    [0.61820287, 0.37284427],
    [0.68787048, 0.37407833],
    [0.75142422, 0.33246486],
    [0.81150472, 0.3254681 ],
    [0.86665163, 0.37564273],
    [0.91377812, 0.43326008],
    [0.95136824, 0.45253772],
    [0.97789108, 0.44963127],
    [0.99007475, 0.47055744],
    [0.98682799, 0.52379432],
    [0.97313715, 0.57099175],
    [0.95554992, 0.58033488],
    [0.93439751, 0.56297851],
    [0.90493559, 0.54567559],
    [0.86649455, 0.52630854],
    [0.82626333, 0.4794025 ],
    [0.79237202, 0.40240439],
    [0.76585883, 0.33304156],
    [0.74098583, 0.30886914],
    [0.71208163, 0.32260366],
    [0.67932847, 0.33414405],
    [0.64856214, 0.32266894],
    [0.62526772, 0.30855275],
    [0.60851923, 0.31853837],
    [0.59227059, 0.34579797],
    [0.57310935, 0.36038979],
    [0.55401654, 0.35251219],
    [0.53898364, 0.34541309],
    [0.52732175, 0.36004415],
    [0.51613936, 0.38346693],
    [0.50524347, 0.38742754],
    [0.49575958, 0.3706251 ],
    [0.48648399, 0.36279841],
    [0.47592203, 0.38276779],
    [0.46608872, 0.40981352],
    [0.45998865, 0.41105717],
    [0.45665763, 0.38805412],
    [0.45264389, 0.37616855],
    [0.44710187, 0.39537577],
    [0.44166308, 0.42108164],
    [0.4367267 , 0.41780007],
    [0.43169385, 0.38994304],
    [0.42730023, 0.37730222],
    [0.42380686, 0.39939242],
    [0.41876515, 0.42714747],
    [0.41112422, 0.42474831],
    [0.4058335 , 0.40408412],
    [0.40894929, 0.41149544],
    [0.4187005 , 0.46002788],
    [0.4266804 , 0.50264324],
    [0.42843869, 0.49109168],
    [0.42843134, 0.44335688],
    [0.43336531, 0.42131211],
    [0.44408769, 0.44151266],
    [0.45542435, 0.44422066],
    [0.46193908, 0.37635022],
    [0.46286506, 0.28197992],
    [0.46190855, 0.263641  ],
    [0.46147376, 0.34372173],
    [0.456724  , 0.40934776],
    [0.43756706, 0.34270299],
    [0.39754577, 0.19630191],
    [0.33828036, 0.17903083],
    [0.26515608, 0.42614591],
    [0.18443246, 0.80439328],
    [0.10749609, 0.99999747],
    [0.05142558, 0.82463323],
    [0.02842046, 0.41199803],
    [0.0370426 , 0.08596354],
    [0.06844421, 0.04458996],
    [0.11753572, 0.20048543],
    [0.18259781, 0.32558378],
    [0.2583685 , 0.30650522],
    [0.3378363 , 0.22428226],
    [0.41924277, 0.20913681],
    [0.50361158, 0.27814288],
    [0.58621302, 0.34303588],
    [0.65844682, 0.34195792],
    [0.71870418, 0.31095417],
    [0.7738089 , 0.31898781],
    [0.82802266, 0.37347408],
    [0.87720161, 0.42246173],
    [0.91561451, 0.43478839],
    [0.94191836, 0.43996118],
    [0.9558245 , 0.47905575],
    [0.95540615, 0.5439136 ],
    [0.94171676, 0.58936858],
    [0.9208707 , 0.59432431],
    [0.89729166, 0.58217045],
    [0.86913507, 0.57606199],
    [0.83427527, 0.55973205],
    [0.7963187 , 0.50331126],
    [0.76009758, 0.41620992],
    [0.72584149, 0.34768046],
    [0.69412844, 0.32977409],
    [0.67315346, 0.34082893]];

    var input = [[1.23, 6.54, 7.81, 3.21, 2.22]];
    // output of shape [1,2].
    var output = List<double>.filled(2, 0).reshape([1, 2]);

    var dems_to_predict = [[ 58.0  , 178.5 ,  94.75,  66.0  ]];
    var dems_anchor = dems_to_predict ;
    var sig_anchor = sig_to_predict ;
    var bp_anchor = [135.0,  85.0];

    var inputs = [dems_to_predict,dems_anchor,sig_to_predict,sig_anchor];

    _interpreter!.run(inputs, output);
    print("predict_000 ${output}");

    return [output[0][0], output[0][1]];
  }*/


}


